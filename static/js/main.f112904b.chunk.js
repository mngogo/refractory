(this.webpackJsonprefractory=this.webpackJsonprefractory||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(14)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(2),s=n.n(i),o=n(3),l=n(4),c=n(5),d=[[/__(.+?)__([\s,])/g,"<strong>$1</strong>$2"],[/_(.+?)_[\s,]/g,"<em>$1</em>&nbsp;"]],u=[[/__(.+?)__/g,"<strong>$1</strong>"],[/_(.+?)_/g,"<em>$1</em>"]],m={insertingMarkdownList:!1},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=document.createRange(),r=window.getSelection();n.setStart(e,t),n.collapse(!0),r.removeAllRanges(),r.addRange(n)},h=function(e,t){var n=e.slice(0,4).trimLeft();if(n.startsWith("#")){var r,a=e.trimLeft(),i=0;for(r=0;r!==a.length;r+=1){if("#"!==a[r]){r-=1;break}if(6===(i+=1))break}if(a.length>r+1&&/\s/.test(a[r+1]))return["header",i,a.slice(r+1).trimLeft()]}else if(n.startsWith("*"))return["list","ordered"];return["sub",t.reduce((function(e,t){return e.replace(t[0],t[1])}),e)]},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=e.parentElement;if(n){var r=h(e.wholeText,t),a=Object(c.a)(r,2),i=a[0],s=a[1];if("sub"===i&&s!==e.wholeText){var o=document.createElement("span");o.classList.add("rf-fmt-span"),o.innerHTML=s,n.insertBefore(o,e),n.removeChild(e)}else if("header"===i){if(!n.classList.contains("rf-editor-line")&&!n.classList.contains("rf-fmt-span"))return;var l=document.createElement("h".concat(s));if(l.innerHTML="&#8203;",n.classList.contains("rf-fmt-span")){var u=n;u.parentElement.classList.contains("rf-editor-line")&&(n=u.parentElement).removeChild(u)}n.insertBefore(l,e),n.removeChild(e),f(l,1)}else if("list"===i){if(m.insertingMarkdownList=!0,v(n,"UL"))return;document.execCommand("insertUnorderedList")}}},p=function e(t){if(t)if(t.nodeType===Node.TEXT_NODE)g(t,u);else{if(0===t.childNodes.length)return;e(t.childNodes[t.childNodes.length-1])}},v=function(e,t){"string"===typeof t&&(t=[t]);for(var n=e;!n.classList.contains("rf-editor");){if(t.includes(n.nodeName))return!0;n=n.parentNode}return!1},E=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"mount",value:function(e){e.classList.add("rf-editor"),e.addEventListener("keydown",(function(e){if(!e.isComposing&&229!==e.keyCode&&9===e.keyCode){e.preventDefault();var t=function(){var e=document.getSelection().anchorNode;return 3===e.nodeType?e.parentNode:e}();if(v(t,["H1","H2","H3","H4","H5","H6"]))return;var n=v(t,"LI")?"indent":"insertUnorderedList";document.execCommand(n,!1,null)}})),new MutationObserver((function(t,n){var r=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;if("characterData"===l.type)g(l.target);else if("childList"===l.type)if(l.target===e&&1===l.addedNodes.length){var c=l.addedNodes[0].previousSibling;p(c)}else if(1===l.addedNodes.length){var d=l.addedNodes[0];if(m.insertingMarkdownList&&"UL"===d.nodeName){m.insertingMarkdownList=!1;var u=d.childNodes[0];console.log("removing this:",u.innerHTML),u.innerHTML=""}else m.insertingMarkdownList&&"LI"===d.nodeName&&(m.insertingMarkdownList=!1,console.log("removing this:",d.innerHTML),d.innerHTML="");if("DIV"===d.nodeName&&d.parentElement!==e){d.parentElement.removeChild(d),d.classList.add("rf-editor-line"),e.appendChild(d);var f=document.createRange();f.setStart(d,0),f.collapse(!0);var h=window.getSelection();h.removeAllRanges(),h.addRange(f)}}}}catch(v){a=!0,i=v}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}})).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}}]),e}(),L=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(null!==t.current){var e=new E;n.current=e,e.mount(t.current)}}),[t]),a.a.createElement("div",{className:"p2",ref:t,contentEditable:!0,suppressContentEditableWarning:!0},a.a.createElement("div",{className:"rf-editor-line"},"Click to edit"))},b=function(){return a.a.createElement("div",{className:"App flex justify-center pt4"},a.a.createElement("div",{className:"flex"},a.a.createElement("div",{className:"sidebar mr4"},a.a.createElement("div",{className:"p2"},a.a.createElement("h3",{className:"h3 mb2"},"Refractory"),a.a.createElement("p",null,"Warning: contenteditable is gross. Approach with caution."),a.a.createElement("h3",null,"### Type pound # then space to create a header"),a.a.createElement("p",null,"Text with one set of ",a.a.createElement("em",null,"_underscores_")," or ",a.a.createElement("em",null,"*asterisks*"),"\xa0 is ",a.a.createElement("em",null,"italicized"),"."),a.a.createElement("p",null,"Text with two sets of ",a.a.createElement("strong",null,"__underscores__")," or ",a.a.createElement("strong",null,"**asterisks**"),"\xa0 is ",a.a.createElement("strong",null,"bolded"),"."),a.a.createElement("ul",{className:"pl2"},a.a.createElement("li",null,"Type an asterisk to begin a list"),a.a.createElement("ul",{className:"pl3"},a.a.createElement("li",null,"Tab to indent, press enter on an empty item to dedent"))),a.a.createElement("p",null,"The source of this thing is at ",a.a.createElement("a",{href:"https://github.com/upvalue/refractory"},"GitHub"),"."))),a.a.createElement(L,null,"Editor goes here")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(11),n(12),n(13);s.a.render(a.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.f112904b.chunk.js.map